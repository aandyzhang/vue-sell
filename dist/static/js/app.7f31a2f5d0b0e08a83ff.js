webpackJsonp([0],{0:function(t,s){},"8J2q":function(t,s,a){"use strict";function e(t){a("OmFf")}var i=a("8KhJ"),o=a("XSr0"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},"8KhJ":function(t,s,a){"use strict";var e=a("Jn7X"),i=a("gS97"),o=a.n(i),n=a("2HEv");s.a={props:{food:{type:Object}},data:function(){return{showFlag:!1,better:0}},computed:{bad:function(){for(var t=0,s=0;s<this.food.ratings.length;s++)1==this.food.ratings[s].rateType&&t++;return t}},methods:{show:function(){var t=this;console.log(this.food),this.showFlag=!0,this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new o.a(t.$refs.fooded,{click:!0})})},getTime:function(t){var s=new Date(t),a=s.getFullYear(),e=s.getMonth()+1,i=s.getDate(),o=s.getHours(),n=s.getMinutes(),c=s.getSeconds();return e=e<10?"0"+e:e,i=i<10?"0"+i:i,o=o<10?"0"+o:o,n=n<10?"0"+n:n,c=c<10?"0"+c:c,a+"-"+e+"-"+i+"\n"+o+":"+n},hidden:function(){this.showFlag=!1},addCart:function(t){t._constructed&&n.a.set(this.food,"count",1)}},components:{cartcontrol:e.a}}},AKNT:function(t,s,a){"use strict";function e(t){a("C4vX")}var i=a("Lxvj"),o=a("qLMv"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},Bs3j:function(t,s,a){"use strict";s.a={}},C4vX:function(t,s){},F9up:function(t,s){},JJff:function(t,s,a){"use strict";var e=a("gS97"),i=a.n(e),o=a("jzGn"),n=a("Jn7X"),c=a("8J2q");s.a={data:function(){return{goods:[],heightList:[],scrollY:0,selectedFood:{}}},props:{seller:{type:Object,default:{}}},components:{cart:o.a,cartcontrol:n.a,food:c.a},computed:{currentIndex:function(){for(var t=0;t<this.heightList.length;t++){var s=this.heightList[t],a=this.heightList[t+1];if(!a||this.scrollY>=s&&this.scrollY<a)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}},methods:{selectFood:function(t,s){s._constructed&&(this.selectedFood=t,this.$refs.foods.show())},goto:function(t,s){if(s._constructed){var a=this.$refs.food.getElementsByClassName("scroll"),e=a[t];this.foodScroll.scrollToElement(e,300)}},_initScroll:function(){var t=this;this.menuScroll=new i.a(this.$refs.menu,{click:!0}),this.foodScroll=new i.a(this.$refs.food,{probeType:3,click:!0}),this.foodScroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y))})},_calHiegth:function(){var t=this.$refs.food.getElementsByClassName("scroll"),s=0;this.heightList.push(s);for(var a=0;a<t.length;a++){s+=t[a].clientHeight,this.heightList.push(s)}}},created:function(){var t=this;this.$http.get("/api/goods").then(function(s){s=s.data,0===s.errno&&(t.goods=s.data,t.$nextTick(function(){t._initScroll(),t._calHiegth()}))},function(t){console.log(t)})}}},Jn7X:function(t,s,a){"use strict";function e(t){a("qqE4")}var i=a("hIg6"),o=a("pOOD"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},LApS:function(t,s,a){"use strict";var e=a("NVrd");s.a={data:function(){return{detailShow:!1}},components:{star:e.a},methods:{showdetail:function(){this.detailShow=!0},closedetail:function(){this.detailShow=!1}},created:function(){this.classMap=["decrease","discount","special","invoice","guarantee"]},props:{seller:{type:Object,default:{}}}}},Lxvj:function(t,s,a){"use strict";s.a={}},M93x:function(t,s,a){"use strict";function e(t){a("pui1")}var i=a("ajUD"),o=a("fdNr"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},MBrg:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"cart"},[a("div",{staticClass:"cart-content",on:{click:t.show}},[a("div",{staticClass:"cart-left"},[a("div",{staticClass:"icon-wrapper"},[a("div",{staticClass:"icon-cart",class:{hight:t.totalCount>0}},[a("i",{staticClass:"icon-shopping_cart",class:{hight:t.totalCount>0}})]),t._v(" "),a("div",{class:{num:t.totalCount>0}},[t._v(t._s(t.totalCount))])]),t._v(" "),a("div",{staticClass:"cart-price",class:{hight:t.totalCount>0}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),a("div",{staticClass:"cart-desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),t._v(" "),a("div",{staticClass:"cart-right"},[a("div",{staticClass:"cart-push",class:t.style},[t._v(t._s(t.pay))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"cart-view"},[a("div",{ref:"shows",staticClass:"cart-main"},[a("div",[a("div",{staticClass:"cart-title"},[a("span",{staticClass:"cart-name"},[t._v("购物车")]),t._v(" "),a("span",{staticClass:"cart-close",on:{click:t.empty}},[t._v("清空")])]),t._v(" "),a("div",{staticClass:"cart-des"},[a("ul",t._l(t.selectFoods,function(s){return a("li",{staticClass:"food-item"},[a("span",{staticClass:"food-name"},[t._v(t._s(s.name))]),t._v(" "),a("span",{staticClass:"food-price"},[t._v("￥"+t._s(s.price*s.count))]),t._v(" "),a("span",{staticClass:"food-control"},[a("cartcontrol",{attrs:{food:s}})],1)])}))])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"cart-bg",on:{click:t.show}})])},i=[],o={render:e,staticRenderFns:i};s.a=o},N0EE:function(t,s,a){"use strict";function e(t){a("ghcl")}var i=a("Bs3j"),o=a("dBAj"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},NHnr:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("2HEv"),i=a("M93x"),o=a("YaEn");e.a.config.productionTip=!1,new e.a({el:"#app",router:o.a,template:"<App/>",components:{App:i.a}})},NVrd:function(t,s,a){"use strict";function e(t){a("lfOs")}var i=a("XugS"),o=a("yTP6"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},OmFf:function(t,s){},PXOj:function(t,s,a){"use strict";function e(t){a("V4Tt")}var i=a("JJff"),o=a("lhmg"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},Suu6:function(t,s){},V4Tt:function(t,s){},XSr0:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],ref:"fooded",staticClass:"food"},[a("div",[a("div",{staticClass:"food-header"},[a("img",{attrs:{src:t.food.image,alt:""}}),t._v(" "),a("div",{staticClass:"back",on:{click:t.hidden}},[a("i",{staticClass:"icon-arrow_lift"})])]),t._v(" "),a("div",{staticClass:"food-content"},[a("h2",{staticClass:"food-title"},[t._v(t._s(t.food.name))]),t._v(" "),a("div",{staticClass:"sell"},[a("span",{staticClass:"sell-number"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),t._v(" "),a("span",{staticClass:"sell-rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),a("div",{staticClass:"prices"},[a("span",{staticClass:"news"},[t._v("￥"+t._s(t.food.price))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice>0,expression:"food.oldPrice>0"}],staticClass:"olds"},[t._v("￥"+t._s(t.food.oldPrice))])]),t._v(" "),a("div",{staticClass:"cart-wapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count,expression:"!food.count"}],staticClass:"buy",on:{click:t.addCart}},[t._v("加入购物车")]),t._v(" "),a("cartcontrol",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],attrs:{food:t.food}})],1)]),t._v(" "),a("div",{staticClass:"bgLine"}),t._v(" "),a("div",{staticClass:"descriptions"},[a("h2",{staticClass:"des-title"},[t._v("商品介绍")]),t._v(" "),a("p",{staticClass:"des-content"},[t._v(t._s(t.food.info))])]),t._v(" "),a("div",{staticClass:"bgLine"}),t._v(" "),a("div",{staticClass:"descriptions"},[a("h2",{staticClass:"des-title"},[t._v("商品评价")]),t._v(" "),a("div",{staticClass:"ratings"},[a("span",{staticClass:"all"},[t._v("全部"),a("i",[t._v(t._s(t.food.rating))])]),t._v(" "),a("span",{staticClass:"better"},[t._v("推荐"),a("i",[t._v(t._s(t.food.ratings.length))])]),t._v(" "),a("span",{staticClass:"bad"},[t._v("吐槽"),a("i",[t._v(t._s(t.bad))])])])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"Tline"}),t._v(" "),t._l(t.food.ratings,function(s){return a("div",{staticClass:"ratingContent"},[a("div",{staticClass:"rating-top"},[a("div",{staticClass:"time"},[t._v(t._s(t.getTime(s.rateTime)))]),t._v(" "),a("div",{staticClass:"user"},[a("span",{staticClass:"sno"},[t._v(t._s(s.username))]),t._v(" "),a("img",{staticClass:"avatar",attrs:{src:s.avatar,alt:"",height:"12",width:"12"}})])]),t._v(" "),a("div",{staticClass:"rating-content"},[a("p",[t._v(t._s(s.text))])])])})],2)])},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"check"},[a("p",[a("i",{staticClass:"icon-check_circle"}),t._v("只看有内容的评价")])])}],o={render:e,staticRenderFns:i};s.a=o},XugS:function(t,s,a){"use strict";s.a={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},detailStar:function(){for(var t=[],s=Math.floor(2*this.score)/2,a=s%1!=0,e=Math.floor(s),i=0;i<e;i++)t.push("on");for(a&&t.push("half");t.length<5;)t.push("off");return t}}}},YaEn:function(t,s,a){"use strict";var e=a("2HEv"),i=a("u28b"),o=a("y0Fx"),n=a("PXOj"),c=a("AKNT"),r=a("N0EE");e.a.use(i.a),e.a.use(o.a),s.a=new i.a({linkActiveClass:"active",mode:"history",routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:n.a},{path:"/ratings",component:c.a},{path:"/seller",component:r.a}]})},ajUD:function(t,s,a){"use strict";var e=a("hxP8");s.a={components:{"v-header":e.a},data:function(){return{seller:{}}},created:function(){var t=this;this.$http.get("/api/seller").then(function(s){s=s.data,0===s.errno&&(t.seller=s.data)},function(t){console.log(t)})}}},dBAj:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement;return(t._self._c||s)("div",[t._v("我是seller")])},i=[],o={render:e,staticRenderFns:i};s.a=o},dd91:function(t,s,a){"use strict";var e=a("Jn7X"),i=a("gS97"),o=a.n(i);s.a={props:{deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},selectFoods:{type:Array,default:function(){return[]}}},data:function(){return{flag:!1}},methods:{empty:function(){var t=this;this.selectFoods.forEach(function(s){s.count=0,t.flag=!1})},show:function(){var t=this;this.selectFoods.length>0&&(this.flag=!this.flag),this.flag&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new o.a(t.$refs.shows,{click:!0})})}},components:{cartcontrol:e.a},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.count}),t},pay:function(){if(0===this.totalPrice)return"￥"+this.minPrice+"元起送";if(this.totalPrice<this.minPrice){return"还差￥"+(this.minPrice-this.totalPrice)+"起送"}return"去结算"},style:function(){return this.totalPrice>=this.minPrice?"enough":"no-enough"}}}},fdNr:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app"}},[a("v-header",{attrs:{seller:t.seller}}),t._v(" "),a("div",{staticClass:"tab"},[a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/goods"}}},[t._v("商品")])],1),t._v(" "),a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/ratings"}}},[t._v("评价")])],1),t._v(" "),a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/seller"}}},[t._v("商家")])],1)]),t._v(" "),a("router-view",{attrs:{seller:t.seller}})],1)},i=[],o={render:e,staticRenderFns:i};s.a=o},ghcl:function(t,s){},hIg6:function(t,s,a){"use strict";var e=a("2HEv");s.a={props:{food:{type:Object}},methods:{addCart:function(t){t._constructed&&(this.food.count?this.food.count++:e.a.set(this.food,"count",1))},decreaseCart:function(t){t._constructed&&(this.food.count?this.food.count--:e.a.set(this.food,"count",1))}}}},hxP8:function(t,s,a){"use strict";function e(t){a("F9up")}var i=a("LApS"),o=a("kIby"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},jzGn:function(t,s,a){"use strict";function e(t){a("Suu6")}var i=a("dd91"),o=a("MBrg"),n=a("o7Pn"),c=e,r=n(i.a,o.a,c,null,null);s.a=r.exports},kIby:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-wrapper"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{width:"64",height:"64",src:t.seller.avatar}})]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[a("span",{staticClass:"brand"}),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),t._v(" "),a("div",{staticClass:"description"},[t._v("\n\t\t\t\t"+t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达\n\t\t\t")]),t._v(" "),t.seller.supports?a("div",{staticClass:"supports"},[a("span",{staticClass:"icon",class:t.classMap[t.seller.supports[0].type]}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t._v(" "),t.seller.supports?a("div",{staticClass:"count",on:{click:t.showdetail}},[a("span",{staticClass:"num"},[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),a("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),t._v(" "),a("div",{staticClass:"gonggao-wrapper",on:{click:t.showdetail}},[a("span",{staticClass:"gonggao-left"}),a("span",{staticClass:"gonggao-center"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),a("span",{staticClass:"gonggao-right icon-keyboard_arrow_right"})]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"detailShow"},[a("div",{staticClass:"detail-wrapper clearfix"},[a("div",{staticClass:"detail-main"},[a("div",{staticClass:"detail-title"},[t._v(t._s(t.seller.name))]),t._v(" "),a("div",{staticClass:"star"},[a("star",{attrs:{size:24,score:3.5}})],1),t._v(" "),a("div",{staticClass:"title"},[a("div",{staticClass:"line"}),t._v(" "),a("div",{staticClass:"info"},[t._v("优惠信息")]),t._v(" "),a("div",{staticClass:"line"})]),t._v(" "),a("div",{staticClass:"youhui"},[t.seller.supports?a("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s,e){return a("li",{staticClass:"supports-item"},[a("span",{staticClass:"icon",class:t.classMap[t.seller.supports[e].type]}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[e].description))])])})):t._e()]),t._v(" "),a("div",{staticClass:"title"},[a("div",{staticClass:"line"}),t._v(" "),a("div",{staticClass:"info"},[t._v("商家公告")]),t._v(" "),a("div",{staticClass:"line"})]),t._v(" "),a("div",{staticClass:"bulletin"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.seller.bulletin)+"\n\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"detail-close",on:{click:t.closedetail}},[a("i",{staticClass:"icon-close"})])])]),t._v(" "),a("div",{staticClass:"background"},[a("img",{attrs:{height:"100%",width:"100%",src:t.seller.avatar,alt:""}})])],1)},i=[],o={render:e,staticRenderFns:i};s.a=o},lfOs:function(t,s){},lhmg:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"good"},[a("div",{ref:"menu",staticClass:"goods-left"},[a("ul",{staticClass:"goods"},t._l(t.goods,function(s,e){return a("li",{staticClass:"goods-item border-line",class:{current:t.currentIndex===e},on:{click:function(s){t.goto(e,s)}}},[a("span",{staticClass:"text"},[t._v(t._s(s.name))])])}))]),t._v(" "),a("div",{ref:"food",staticClass:"goods-center"},[a("ul",t._l(t.goods,function(s,e){return a("li",{staticClass:"scroll"},[a("h1",{staticClass:"goods-name"},[t._v(t._s(s.name))]),t._v(" "),a("ul",{ref:"ulname",refInFor:!0},t._l(s.foods,function(s){return a("li",{staticClass:"food-item food-line",on:{click:function(a){t.selectFood(s,a)}}},[a("div",{staticClass:"icon"},[a("img",{attrs:{width:"57",height:"57",src:s.icon,alt:""}})]),t._v(" "),a("div",{staticClass:"content"},[a("h2",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),a("p",{staticClass:"des"},[t._v(t._s(s.description)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"sell"},[a("span",[t._v("月售"+t._s(s.sellCount)+"份")]),a("span",{staticClass:"rating"},[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),a("div",{staticClass:"price\n\t\t\t\t\t\t\t"},[a("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),a("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))])]),t._v(" "),a("div",{staticClass:"cart-wapper"},[a("cartcontrol",{attrs:{food:s}})],1)])])}))])}))]),t._v(" "),a("cart",{attrs:{"select-foods":t.selectFoods,deliveryPrice:t.seller.deliveryPrice,minPrice:t.seller.minPrice}}),t._v(" "),a("food",{ref:"foods",attrs:{food:t.selectedFood}})],1)},i=[],o={render:e,staticRenderFns:i};s.a=o},pOOD:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"cartcontrol"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"decrease-wrapper",on:{click:function(s){t.decreaseCart(s)}}},[a("i",{staticClass:"icon-remove_circle_outline"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-text"},[t._v(t._s(t.food.count))]),t._v(" "),a("div",{staticClass:"add-wrapper",on:{click:function(s){t.addCart(s)}}},[a("i",{staticClass:"icon-add_circle"})])])},i=[],o={render:e,staticRenderFns:i};s.a=o},pui1:function(t,s){},qLMv:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement;return(t._self._c||s)("div",[t._v("我是ratings")])},i=[],o={render:e,staticRenderFns:i};s.a=o},qqE4:function(t,s){},yTP6:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"star",class:t.starType},t._l(t.detailStar,function(t){return a("span",{staticClass:"star-item",class:t})}))},i=[],o={render:e,staticRenderFns:i};s.a=o}},["NHnr"]);
//# sourceMappingURL=app.7f31a2f5d0b0e08a83ff.js.map